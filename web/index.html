<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEPLg2 Web Playground</title>
    <link data-trunk rel="css" href="styles.css">
    <link data-trunk rel="copy-dir" href="vendor">
    <link data-trunk rel="copy-file" href="main.js">
    <link data-trunk rel="rust" href="../nepl-web/Cargo.toml" data-bindgen-target="web">
    <script type="module" src="main.js"></script>
</head>
<body>
    <header class="page-header">
        <div class="page-header__inner">
            <div class="page-header__intro">
                <h1>NEPLg2 Playground</h1>
                <p>ブラウザ上で NEPL のコードを編集し、WAT 生成や実行、テストを試せます。</p>
            </div>
            <nav class="page-header__actions" aria-label="Additional resources">
                <a
                    id="docs-link"
                    class="page-header__link"
                    data-docs-url="../doc/"
                    href="../doc/"
                    target="_blank"
                    rel="noopener"
                >
                    Documentation
                </a>
            </nav>
        </div>
    </header>
    <main class="layout">
        <section class="panel panel--editor">
            <div class="panel__header">
                <label for="editor-frame" class="panel__label">ソースコード</label>
                <span id="editor-status" class="status-pill status-warning">エディタの読み込みを待機中...</span>
            </div>
            <div class="editor-frame-wrapper">
                <iframe id="editor-frame" title="NEPL Editor" data-src="vendor/editorsample/index.html"></iframe>
                <div id="fallback" class="fallback" hidden>
                    <p>エディタが見つからないため、簡易エディタを表示しています。</p>
                    <textarea id="fallback-editor" aria-label="Fallback editor" spellcheck="false"></textarea>
                </div>
            </div>
            <div class="panel__controls">
                <button type="button" id="compile">WATを生成</button>
                <button type="button" id="run" class="primary">Run</button>
                <button type="button" id="test">Test</button>
                <button type="button" id="clear" class="danger">Clear</button>
            </div>
            <div id="status" class="status" role="status" aria-live="polite"></div>
        </section>
        <section class="panel">
            <label for="wat" class="panel__label">生成されたWAT</label>
            <textarea id="wat" class="panel__textarea" readonly spellcheck="false"></textarea>
        </section>
        <section class="panel panel--terminal">
            <label for="terminal-output" class="panel__label">実行結果 (ターミナル)</label>
            <div class="terminal-controls">
                <div class="terminal-command">
                    <label for="terminal-command">コマンド</label>
                    <input id="terminal-command" type="text" placeholder="run / test / clear / help" autocomplete="off">
                </div>
                <div class="terminal-stdin">
                    <label for="terminal-stdin">stdin</label>
                    <textarea id="terminal-stdin" rows="4" placeholder="標準入力をここに入力"></textarea>
                </div>
            </div>
            <pre id="terminal-output" class="terminal-output" aria-live="polite"></pre>
        </section>
    </main>
    <footer class="page-footer">
        <p>wasm32ターゲット向けにビルドされたコンパイラとWASMランタイムを利用しています。</p>
    </footer>
</body>
</html>
