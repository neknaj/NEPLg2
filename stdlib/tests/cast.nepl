//: cast: tests/cast.nepl に関する機能を提供するライブラリ
//:
//: [目的/もくてき]:
//: - このモジュールの公開 API を提供します。
//: - 実装の変更時に最小限の doctest 実行経路を維持します。
//:
//: [注意/ちゅうい]:
//: - 詳細な関数別ドキュメントは段階的に追記します。
//:
//: neplg2:test[skip]
//: ```neplg2
//:| #entry main
//:| #target wasi
//: ()
//: ```

#entry main
#indent 4
#target wasi

#import "core/cast" as *
#import "std/test" as *

//: main: 関数の概要
//:
//: [目的/もくてき]:
//: - main が担う機能を提供します。
//:
//: [実装/じっそう]:
//: - 前置記法・オフサイドルール前提で読みやすく保つ構造です。
//:
//: [注意/ちゅうい]:
//: - 型引数や所有権の制約は呼び出し側で満たしてください。
//:
//: [計算量/けいさんりょう]:
//: - 実装に依存します。
fn main <()*> ()> ():
    // Test bool to i32 conversion
    assert_eq_i32 1 cast_bool_to_i32 true;
    assert_eq_i32 0 cast_bool_to_i32 false;
    assert_eq_i32 1 cast true;
    assert_eq_i32 0 cast false;

    // Test i32 to bool conversion
    assert cast_i32_to_bool 1;
    assert cast_i32_to_bool 42;
    assert_ne true cast_i32_to_bool 0;
    assert cast 1;
    assert cast 42;
    assert_ne true cast 0;

    // Test i32 <-> u8 conversion
    let b <u8> cast 222;
    assert_eq_i32 222 cast b;

    ()
